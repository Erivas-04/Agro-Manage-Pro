<div class="grid">
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="col-6">
                <h1>Registros de movimientos</h1>
            </div>
            <div>
                <p-table [value]="movements" responsiveLayout="scroll" scrollDirection="both" [scrollable]="true" scrollHeight="400px" [paginator]="true" [rows]="20">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="cage_code">Codigo de corral <p-sortIcon field="cage_code"></p-sortIcon></th>
                            <th pSortableColumn="cage_name">Nombre de corral <p-sortIcon field="cage_name"></p-sortIcon></th>
                            <th pSortableColumn="time">Fecha y hora <p-sortIcon field="time"></p-sortIcon></th>
                            <th pSortableColumn="movement_type">Movimiento <p-sortIcon field="movement_type"></p-sortIcon></th>
                            <th>Usuario</th>
                            <th>Elemento usado</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-movement>
                        <tr (click)="showDetail(movement)">
                            <td style="width: 12%;">{{movement.cage_code}}</td>
                            <td style="width: 13%;">{{movement.cage_name}}</td>
                            <td style="width: 16%;">{{movement.time}}</td>
                            <td style="width: 14%;">{{movement.movement_type}}</td>
                            <td style="width: 10%;">{{movement.user_name}}</td>
                            <td style="width: 10%;">{{movement.animalOrAnimalFood}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <p-dialog header="Registro de uso" [(visible)]="showDialog" [modal]="true" showEffect="fade" [breakpoints]="{'960px': '75vw'}" [style]="{width: '50vw'}">
                @if (showDialog) {
                    <app-dialog-movement (close)="showDialog=false" [detail]="detail"/>
                }
            </p-dialog>
        </div>
    </div>
</div>